<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="549px" preserveAspectRatio="none" style="width:1206px;height:549px;background:#FFFFFF;" version="1.1" viewBox="0 0 1206 549" width="1206px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="137" x="533.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127" x="538.75" y="27.9951">Update Delivery</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="398.5" x2="398.5" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="535.5" x2="535.5" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="591.5" x2="591.5" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="727" x2="727" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1083.5" x2="1083.5" y1="104.5938" y2="471.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1166.5" x2="1166.5" y1="104.5938" y2="471.0547"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="93.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="490.0498">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="349.5" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="356.5" y="93.292">DeliverySvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="349.5" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="356.5" y="490.0498">DeliverySvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="507.5" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="514.5" y="93.292">Mdms</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="507.5" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="514.5" y="490.0498">Mdms</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="578" y="101.292">DB</text><path d="M573.5,52.2969 C573.5,42.2969 591.5,42.2969 591.5,42.2969 C591.5,42.2969 609.5,42.2969 609.5,52.2969 L609.5,78.2969 C609.5,88.2969 591.5,88.2969 591.5,88.2969 C591.5,88.2969 573.5,88.2969 573.5,78.2969 L573.5,52.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M573.5,52.2969 C573.5,62.2969 591.5,62.2969 591.5,62.2969 C591.5,62.2969 609.5,62.2969 609.5,52.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="578" y="483.0498">DB</text><path d="M573.5,496.3516 C573.5,486.3516 591.5,486.3516 591.5,486.3516 C591.5,486.3516 609.5,486.3516 609.5,496.3516 L609.5,522.3516 C609.5,532.3516 591.5,532.3516 591.5,532.3516 C591.5,532.3516 573.5,532.3516 573.5,522.3516 L573.5,496.3516 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M573.5,496.3516 C573.5,506.3516 591.5,506.3516 591.5,506.3516 C591.5,506.3516 609.5,506.3516 609.5,496.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="700" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="707" y="93.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="700" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="707" y="490.0498">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1044.5" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1051.5" y="93.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1044.5" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1051.5" y="490.0498">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1132.5" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1139.5" y="93.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1132.5" y="470.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1139.5" y="490.0498">Indexer</text><polygon fill="#181818" points="386.5,131.7266,396.5,135.7266,386.5,139.7266,390.5,135.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="392.5" y1="135.7266" y2="135.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="40.5" y="130.6606">Update delivery</text><polygon fill="#181818" points="523.5,160.8594,533.5,164.8594,523.5,168.8594,527.5,164.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="529.5" y1="164.8594" y2="164.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="405.5" y="159.7935">Fetch mdms data</text><polygon fill="#181818" points="409.5,189.9922,399.5,193.9922,409.5,197.9922,405.5,193.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="403.5" x2="534.5" y1="193.9922" y2="193.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="415.5" y="188.9263">Get mdms data</text><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="440.5" y1="223.125" y2="223.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="440.5" x2="440.5" y1="223.125" y2="236.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="399.5" x2="440.5" y1="236.125" y2="236.125"/><polygon fill="#181818" points="409.5,232.125,399.5,236.125,409.5,240.125,405.5,236.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="405.5" y="218.0591">Validate request</text><polygon fill="#181818" points="579.5,261.2578,589.5,265.2578,579.5,269.2578,583.5,265.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="585.5" y1="265.2578" y2="265.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="405.5" y="260.1919">Fetch delivery if exists</text><polygon fill="#181818" points="409.5,290.3906,399.5,294.3906,409.5,298.3906,405.5,294.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="403.5" x2="590.5" y1="294.3906" y2="294.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="415.5" y="289.3247">Delivery to be updated</text><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="440.5" y1="323.5234" y2="323.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="440.5" x2="440.5" y1="323.5234" y2="336.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="399.5" x2="440.5" y1="336.5234" y2="336.5234"/><polygon fill="#181818" points="409.5,332.5234,399.5,336.5234,409.5,340.5234,405.5,336.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="405.5" y="318.4575">Update delivery</text><polygon fill="#181818" points="715.5,361.6563,725.5,365.6563,715.5,369.6563,719.5,365.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="721.5" y1="365.6563" y2="365.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="405.5" y="360.5903">(async) Produce updated delivery data to kafka</text><polygon fill="#181818" points="738.5,390.7891,728.5,394.7891,738.5,398.7891,734.5,394.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="732.5" x2="1082.5" y1="394.7891" y2="394.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="744.5" y="389.7231">(async) Consume updated delivery data from kafka</text><polygon fill="#181818" points="738.5,419.9219,728.5,423.9219,738.5,427.9219,734.5,423.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="732.5" x2="1165.5" y1="423.9219" y2="423.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="744.5" y="418.856">(async) Consume updated delivery data from kafka</text><polygon fill="#181818" points="44.5,449.0547,34.5,453.0547,44.5,457.0547,40.5,453.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38.5" x2="397.5" y1="453.0547" y2="453.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341" x="50.5" y="447.9888">HttpStatus Ok - Updated delivery data with deliveryId</text><!--MD5=[572bbb640e931cdb724dd97b79cd7556]
@startuml
title Update Delivery

Client -> DeliverySvc : Update delivery
DeliverySvc -> Mdms : Fetch mdms data
DeliverySvc <- - Mdms : Get mdms data
DeliverySvc -> DeliverySvc : Validate request
database DB
DeliverySvc -> DB : Fetch delivery if exists
DeliverySvc <- - DB : Delivery to be updated
DeliverySvc -> DeliverySvc : Update delivery
DeliverySvc -> Kafka : (async) Produce updated delivery data to kafka
Kafka <- Persister : (async) Consume updated delivery data from kafka
Kafka <- Indexer : (async) Consume updated delivery data from kafka
Client <- - DeliverySvc : HttpStatus Ok - Updated delivery data with deliveryId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>