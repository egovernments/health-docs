<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1745px" preserveAspectRatio="none" style="width:2118px;height:1745px;background:#FFFFFF;" version="1.1" viewBox="0 0 2118 1745" width="2118px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="26.2969" id="_title" rx="3.5" ry="3.5" style="stroke:none;stroke-width:1.0;" width="239" x="941" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="229" x="946" y="27.9951">Household Member - Update</text><rect fill="#FFFFFF" height="1305.5156" style="stroke:#696969;stroke-width:1.0;" width="10" x="627.5" y="135.7266"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="1382.1094"/><rect fill="#FFFFFF" height="93.832" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="283.8242"/><rect fill="#FFFFFF" height="93.832" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="650.1523"/><rect fill="#FFFFFF" height="170.6641" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="1352.9766"/><rect fill="#FFFFFF" height="147.3984" style="stroke:#696969;stroke-width:1.0;" width="10" x="1476.5" y="1494.5078"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1611" y="1523.6406"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="347.6563"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="713.9844"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="1101.3125"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1849.5" y="1552.7734"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="406.7891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="581.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="773.1172"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="881.3828"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="1160.4453"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="1611.9063"/><rect fill="none" height="294.0625" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="2103" x="9" y="192.8594"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="309.3906"/><rect fill="none" height="310.1953" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="2044" x="68" y="543.0547"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="675.7188"/><rect fill="none" height="315.0625" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1999" x="113" y="925.5156"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="1063.0469"/><rect fill="none" height="193.6641" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="1456.2422"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="321" x2="321" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="632.5" x2="632.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1137.5" x2="1137.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1226.5" x2="1226.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1481.5" x2="1481.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1615.5" x2="1615.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1737.5" x2="1737.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1854.5" x2="1854.5" y1="104.5938" y2="1666.9063"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2055" x2="2055" y1="104.5938" y2="1666.9063"/><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="55" x="294" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="301" y="93.292">Client</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="55" x="294" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="301" y="1685.9014">Client</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="558.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="565.5" y="93.292">HouseholdRegistry</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="558.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="565.5" y="1685.9014">HouseholdRegistry</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="98" x="1088.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1095.5" y="93.292">RedisCache</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="98" x="1088.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1095.5" y="1685.9014">RedisCache</text><path d="M1201.5,78.2969 L1251.5,78.2969 C1256.5,78.2969 1256.5,91.4453 1256.5,91.4453 C1256.5,91.4453 1256.5,104.5938 1251.5,104.5938 L1201.5,104.5938 C1196.5,104.5938 1196.5,91.4453 1196.5,91.4453 C1196.5,91.4453 1196.5,78.2969 1201.5,78.2969 " fill="#FF6347" style="stroke:#454645;stroke-width:1.5;"/><path d="M1251.5,78.2969 C1246.5,78.2969 1246.5,91.4453 1246.5,91.4453 C1246.5,104.5938 1251.5,104.5938 1251.5,104.5938 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1201.5" y="96.292">Kafka</text><path d="M1201.5,1665.9063 L1251.5,1665.9063 C1256.5,1665.9063 1256.5,1679.0547 1256.5,1679.0547 C1256.5,1679.0547 1256.5,1692.2031 1251.5,1692.2031 L1201.5,1692.2031 C1196.5,1692.2031 1196.5,1679.0547 1196.5,1679.0547 C1196.5,1679.0547 1196.5,1665.9063 1201.5,1665.9063 " fill="#FF6347" style="stroke:#454645;stroke-width:1.5;"/><path d="M1251.5,1665.9063 C1246.5,1665.9063 1246.5,1679.0547 1246.5,1679.0547 C1246.5,1692.2031 1251.5,1692.2031 1251.5,1692.2031 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1201.5" y="1683.9014">Kafka</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="128" x="1417.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1424.5" y="93.292">PersisterService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="128" x="1417.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1424.5" y="1685.9014">PersisterService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="121" x="1555.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1562.5" y="93.292">IndexerService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="121" x="1555.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1562.5" y="1685.9014">IndexerService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="103" x="1686.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1693.5" y="93.292">ErrorService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="103" x="1686.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1693.5" y="1685.9014">ErrorService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="110" x="1799.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1806.5" y="93.292">ElasticSearch</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="110" x="1799.5" y="1665.9063"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1806.5" y="1685.9014">ElasticSearch</text><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="2018" y="101.292">Database</text><path d="M2037,52.2969 C2037,42.2969 2055,42.2969 2055,42.2969 C2055,42.2969 2073,42.2969 2073,52.2969 L2073,78.2969 C2073,88.2969 2055,88.2969 2055,88.2969 C2055,88.2969 2037,88.2969 2037,78.2969 L2037,52.2969 " fill="#00FFFF" style="stroke:#454645;stroke-width:1.5;"/><path d="M2037,52.2969 C2037,62.2969 2055,62.2969 2055,62.2969 C2055,62.2969 2073,62.2969 2073,52.2969 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="2018" y="1678.9014">Database</text><path d="M2037,1692.2031 C2037,1682.2031 2055,1682.2031 2055,1682.2031 C2055,1682.2031 2073,1682.2031 2073,1692.2031 L2073,1718.2031 C2073,1728.2031 2055,1728.2031 2055,1728.2031 C2055,1728.2031 2037,1728.2031 2037,1718.2031 L2037,1692.2031 " fill="#00FFFF" style="stroke:#454645;stroke-width:1.5;"/><path d="M2037,1692.2031 C2037,1702.2031 2055,1702.2031 2055,1702.2031 C2055,1702.2031 2073,1702.2031 2073,1692.2031 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><rect fill="#FFFFFF" height="1305.5156" style="stroke:#696969;stroke-width:1.0;" width="10" x="627.5" y="135.7266"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="1382.1094"/><rect fill="#FFFFFF" height="93.832" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="283.8242"/><rect fill="#FFFFFF" height="93.832" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="650.1523"/><rect fill="#FFFFFF" height="170.6641" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="1352.9766"/><rect fill="#FFFFFF" height="147.3984" style="stroke:#696969;stroke-width:1.0;" width="10" x="1476.5" y="1494.5078"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1611" y="1523.6406"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="347.6563"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="713.9844"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1733" y="1101.3125"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1849.5" y="1552.7734"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="406.7891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="581.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="773.1172"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="881.3828"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="1160.4453"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="2050" y="1611.9063"/><polygon fill="#454645" points="615.5,131.7266,625.5,135.7266,615.5,139.7266,619.5,135.7266" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="321.5" x2="621.5" y1="135.7266" y2="135.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="328.5" y="130.6606">/household/member/v1/_update</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="164.8594" y2="164.8594"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="164.8594" y2="177.8594"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="177.8594" y2="177.8594"/><polygon fill="#454645" points="648.5,173.8594,638.5,177.8594,648.5,181.8594,644.5,177.8594" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="644.5" y="159.7935">Validate request body</text><path d="M12.5,192.8594 L73,192.8594 L73,199.9922 L63,209.9922 L9,209.9922 L9,196.3594 A3.5,3.5 0 0 1 12.5,192.8594 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="294.0625" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="2103" x="9" y="192.8594"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="24" y="205.9263">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="154" x="88" y="205.0698">[request validation fails]</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="231.125" y2="231.125"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="231.125" y2="244.125"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="244.125" y2="244.125"/><polygon fill="#454645" points="648.5,240.125,638.5,244.125,648.5,248.125,644.5,244.125" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="644.5" y="226.0591">Request validation failed</text><polygon fill="#454645" points="1209.5,279.8242,1219.5,283.8242,1209.5,287.8242,1213.5,283.8242" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1215.5" y1="283.8242" y2="283.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="644.5" y="278.7583">Household Member Data /error_topic</text><path d="M280,260.625 L280,293.625 A3.5,3.5 0 0 0 283.5,297.125 L618.5,297.125 A3.5,3.5 0 0 0 622,293.625 L622,267.125 L612,257.125 L283.5,257.125 A3.5,3.5 0 0 0 280,260.625 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M612,257.125 L612,265.375 A1.75,1.75 0 0 0 613.75,267.125 L622,267.125 L612,257.125 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="286" y="274.1919">This will be marked as unrecoverable right away</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="286" y="289.3247">and require manual intervention</text><path d="M1190,309.3906 L1273.5,309.3906 L1273.5,316.5234 L1263.5,326.5234 L1186.5,326.5234 L1186.5,312.8906 A3.5,3.5 0 0 1 1190,309.3906 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="309.3906"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1201.5" y="322.4575">async</text><polygon fill="#454645" points="1242.5,343.6563,1232.5,347.6563,1242.5,351.6563,1238.5,347.6563" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1236.5" x2="1732" y1="347.6563" y2="347.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1248.5" y="342.5903">Consume Household Member Data</text><polygon fill="#454645" points="2038,402.7891,2048,406.7891,2038,410.7891,2042,406.7891" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1743" x2="2044" y1="406.7891" y2="406.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1750" y="401.7231">Persist Household Member Data /error_table</text><polygon fill="#454645" points="332.5,471.9219,322.5,475.9219,332.5,479.9219,328.5,475.9219" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="475.9219" y2="475.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="470.856">HttpStatus: 400 with appropriate error code</text><path d="M19,460.2891 L19,478.2891 A3.5,3.5 0 0 0 22.5,481.7891 L312.5,481.7891 A3.5,3.5 0 0 0 316,478.2891 L316,466.7891 L306,456.7891 L22.5,456.7891 A3.5,3.5 0 0 0 19,460.2891 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M306,456.7891 L306,465.0391 A1.75,1.75 0 0 0 307.75,466.7891 L316,466.7891 L306,456.7891 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="25" y="473.856">Error Code: REQUEST_VALIDATION_FAILED</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="515.0547" y2="515.0547"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="515.0547" y2="528.0547"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="528.0547" y2="528.0547"/><polygon fill="#454645" points="648.5,524.0547,638.5,528.0547,648.5,532.0547,644.5,528.0547" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="644.5" y="509.9888">Request validation successful</text><path d="M71.5,543.0547 L132,543.0547 L132,550.1875 L122,560.1875 L68,560.1875 L68,546.5547 A3.5,3.5 0 0 1 71.5,543.0547 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="310.1953" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="2044" x="68" y="543.0547"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="83" y="556.1216">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="147" y="555.2651">[mapping record doesn't exist]</text><polygon fill="#454645" points="2038,577.3203,2048,581.3203,2038,585.3203,2042,581.3203" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="2044" y1="581.3203" y2="581.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="674" x="644.5" y="576.2544">Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="648.5,606.4531,638.5,610.4531,648.5,614.4531,644.5,610.4531" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="2054" y1="610.4531" y2="610.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="654.5" y="605.3872">0 rows</text><polygon fill="#454645" points="1209.5,646.1523,1219.5,650.1523,1209.5,654.1523,1213.5,650.1523" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1215.5" y1="650.1523" y2="650.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="644.5" y="645.0864">Household Member Data /error_topic</text><path d="M298,626.9531 L298,659.9531 A3.5,3.5 0 0 0 301.5,663.4531 L618.5,663.4531 A3.5,3.5 0 0 0 622,659.9531 L622,633.4531 L612,623.4531 L301.5,623.4531 A3.5,3.5 0 0 0 298,626.9531 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M612,623.4531 L612,631.7031 A1.75,1.75 0 0 0 613.75,633.4531 L622,633.4531 L612,623.4531 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="304" y="640.52">This will be marked as recoverable and will be</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="304" y="655.6528">retried later</text><path d="M1190,675.7188 L1273.5,675.7188 L1273.5,682.8516 L1263.5,692.8516 L1186.5,692.8516 L1186.5,679.2188 A3.5,3.5 0 0 1 1190,675.7188 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="675.7188"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1201.5" y="688.7856">async</text><polygon fill="#454645" points="1242.5,709.9844,1232.5,713.9844,1242.5,717.9844,1238.5,713.9844" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1236.5" x2="1732" y1="713.9844" y2="713.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1248.5" y="708.9185">Consume Household Member Data</text><polygon fill="#454645" points="2038,769.1172,2048,773.1172,2038,777.1172,2042,773.1172" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1743" x2="2044" y1="773.1172" y2="773.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1750" y="768.0513">Persist Household Member Data /error_table</text><polygon fill="#454645" points="332.5,838.25,322.5,842.25,332.5,846.25,328.5,842.25" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="842.25" y2="842.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="837.1841">HttpStatus: 400 with appropriate error code</text><path d="M78,826.6172 L78,844.6172 A3.5,3.5 0 0 0 81.5,848.1172 L312.5,848.1172 A3.5,3.5 0 0 0 316,844.6172 L316,833.1172 L306,823.1172 L81.5,823.1172 A3.5,3.5 0 0 0 78,826.6172 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M306,823.1172 L306,831.3672 A1.75,1.75 0 0 0 307.75,833.1172 L316,833.1172 L306,823.1172 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="84" y="840.1841">Error Code: DEPENDENCY_ERROR</text><polygon fill="#454645" points="2038,877.3828,2048,881.3828,2038,885.3828,2042,881.3828" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="2044" y1="881.3828" y2="881.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="674" x="644.5" y="876.3169">Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="648.5,906.5156,638.5,910.5156,648.5,914.5156,644.5,910.5156" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="2054" y1="910.5156" y2="910.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="654.5" y="905.4497">1 row</text><path d="M116.5,925.5156 L177,925.5156 L177,932.6484 L167,942.6484 L113,942.6484 L113,929.0156 A3.5,3.5 0 0 1 116.5,925.5156 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="315.0625" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1999" x="113" y="925.5156"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="128" y="938.5825">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141" x="192" y="937.7261">[incorrect rowVersion]</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="963.7813" y2="963.7813"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="963.7813" y2="976.7813"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="976.7813" y2="976.7813"/><polygon fill="#454645" points="648.5,972.7813,638.5,976.7813,648.5,980.7813,644.5,976.7813" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="958.7153">Compare rowVersion between request and db</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="1005.9141" y2="1005.9141"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="1005.9141" y2="1018.9141"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="1018.9141" y2="1018.9141"/><polygon fill="#454645" points="648.5,1014.9141,638.5,1018.9141,648.5,1022.9141,644.5,1018.9141" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="644.5" y="1000.8481">Incorrect rowVersion [request: should be +1 only]</text><polygon fill="#454645" points="1214.5,1044.0469,1224.5,1048.0469,1214.5,1052.0469,1218.5,1048.0469" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1220.5" y1="1048.0469" y2="1048.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="644.5" y="1042.981">Household Member Data /error_topic</text><path d="M1190,1063.0469 L1273.5,1063.0469 L1273.5,1070.1797 L1263.5,1080.1797 L1186.5,1080.1797 L1186.5,1066.5469 A3.5,3.5 0 0 1 1190,1063.0469 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="135.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="1063.0469"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1201.5" y="1076.1138">async</text><polygon fill="#454645" points="1237.5,1097.3125,1227.5,1101.3125,1237.5,1105.3125,1233.5,1101.3125" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1231.5" x2="1732" y1="1101.3125" y2="1101.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1243.5" y="1096.2466">Consume Household Member Data</text><polygon fill="#454645" points="2038,1156.4453,2048,1160.4453,2038,1164.4453,2042,1160.4453" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1743" x2="2044" y1="1160.4453" y2="1160.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1750" y="1155.3794">Persist Household Member Data /error_table</text><polygon fill="#454645" points="332.5,1225.5781,322.5,1229.5781,332.5,1233.5781,328.5,1229.5781" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="1229.5781" y2="1229.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="1224.5122">HttpStatus: 400 with appropriate error code</text><path d="M123,1213.9453 L123,1231.9453 A3.5,3.5 0 0 0 126.5,1235.4453 L312.5,1235.4453 A3.5,3.5 0 0 0 316,1231.9453 L316,1220.4453 L306,1210.4453 L126.5,1210.4453 A3.5,3.5 0 0 0 123,1213.9453 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><path d="M306,1210.4453 L306,1218.6953 A1.75,1.75 0 0 0 307.75,1220.4453 L316,1220.4453 L306,1210.4453 " fill="#7FFFD4" style="stroke:#181818;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="129" y="1227.5122">Error Code: BAD_REQUEST</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="1268.7109" y2="1268.7109"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="1268.7109" y2="1281.7109"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="1281.7109" y2="1281.7109"/><polygon fill="#454645" points="648.5,1277.7109,638.5,1281.7109,648.5,1285.7109,644.5,1281.7109" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="1263.645">Compare rowVersion between request and db</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="1310.8438" y2="1310.8438"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="1310.8438" y2="1323.8438"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="1323.8438" y2="1323.8438"/><polygon fill="#454645" points="648.5,1319.8438,638.5,1323.8438,648.5,1327.8438,644.5,1323.8438" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="1305.7778">rowVersion in request = rowVersion in db + 1</text><polygon fill="#454645" points="1209.5,1348.9766,1219.5,1352.9766,1209.5,1356.9766,1213.5,1352.9766" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1215.5" y1="1352.9766" y2="1352.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="644.5" y="1347.9106">Household Member Data /update_topic</text><polygon fill="#454645" points="1120.5,1378.1094,1130.5,1382.1094,1120.5,1386.1094,1124.5,1382.1094" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="1382.1094" y2="1382.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="476" x="644.5" y="1377.0435">Update new record in cache against clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="332.5,1437.2422,322.5,1441.2422,332.5,1445.2422,328.5,1441.2422" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="631.5" y1="1441.2422" y2="1441.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="338.5" y="1436.1763">HttpStatus: 202 ACCEPTED</text><path d="M1190,1456.2422 L1273.5,1456.2422 L1273.5,1463.375 L1263.5,1473.375 L1186.5,1473.375 L1186.5,1459.7422 A3.5,3.5 0 0 1 1190,1456.2422 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="193.6641" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="915.5" x="1186.5" y="1456.2422"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1201.5" y="1469.3091">async</text><polygon fill="#454645" points="1242.5,1490.5078,1232.5,1494.5078,1242.5,1498.5078,1238.5,1494.5078" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1236.5" x2="1475.5" y1="1494.5078" y2="1494.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1248.5" y="1489.4419">Consume Household Member Data</text><polygon fill="#454645" points="1237.5,1519.6406,1227.5,1523.6406,1237.5,1527.6406,1233.5,1523.6406" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1231.5" x2="1610" y1="1523.6406" y2="1523.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1243.5" y="1518.5747">Consume Household Member Data</text><polygon fill="#454645" points="1837.5,1548.7734,1847.5,1552.7734,1837.5,1556.7734,1841.5,1552.7734" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1621" x2="1843.5" y1="1552.7734" y2="1552.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1628" y="1547.7075">Store Household Member Data</text><polygon fill="#454645" points="2038,1607.9063,2048,1611.9063,2038,1615.9063,2042,1611.9063" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1486.5" x2="2044" y1="1611.9063" y2="1611.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1493.5" y="1606.8403">Update Household Member Data</text><!--MD5=[013e12bb3b84aa0c1b84cc830c92cdc1]
@startuml
title Household Member - Update
!theme vibrant
participant Client as c
participant HouseholdRegistry as s
participant RedisCache as rc
queue Kafka as k
participant PersisterService as prs
participant IndexerService as idx
participant ErrorService as es
participant ElasticSearch as el
database Database as db
c -> s : /household/member/v1/_update
activate s
s -> s: Validate request body
alt request validation fails
    s -> s: Request validation failed
    s -> k: Household Member Data /error_topic
    note left
        This will be marked as unrecoverable right away 
        and require manual intervention
    end note
    activate k
    group async
        es -> k: Consume Household Member Data
        activate es
        deactivate k
        es -> db: Persist Household Member Data /error_table
        activate db
        deactivate db
        deactivate es
    end
    s -> c: HttpStatus: 400 with appropriate error code
    note left
        Error Code: REQUEST_VALIDATION_FAILED
    end note
end
s -> s: Request validation successful
alt mapping record doesn't exist
  s -> db: Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId
  activate db
  db -> s: 0 rows
  deactivate db
  s -> k: Household Member Data /error_topic
  note left
      This will be marked as recoverable and will be
      retried later
  end note
  activate k
  group async
      es -> k: Consume Household Member Data
      activate es
      deactivate k
      es -> db: Persist Household Member Data /error_table
      activate db
      deactivate db
      deactivate es
  end
  s -> c: HttpStatus: 400 with appropriate error code
  note left
      Error Code: DEPENDENCY_ERROR
  end note
end
s -> db: Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId
activate db
db -> s: 1 row
deactivate db
alt incorrect rowVersion
    s -> s: Compare rowVersion between request and db
    s -> s: Incorrect rowVersion [request: should be +1 only]
    s -> k: Household Member Data /error_topic
    group async
        es -> k: Consume Household Member Data
        activate es
        deactivate k
        es -> db: Persist Household Member Data /error_table
        activate db
        deactivate db
        deactivate es
    end
    s -> c: HttpStatus: 400 with appropriate error code
    note left
      Error Code: BAD_REQUEST
    end note
end
s -> s: Compare rowVersion between request and db
s -> s: rowVersion in request = rowVersion in db + 1
s -> k: Household Member Data /update_topic
activate k
s -> rc: Update new record in cache against clientReferenceId/serverGeneratedId
activate rc
deactivate rc
s -> c: HttpStatus: 202 ACCEPTED
deactivate s
group async
    prs -> k: Consume Household Member Data
    activate prs
    idx -> k: Consume Household Member Data
    deactivate k
    activate idx
    idx -> el: Store Household Member Data
    activate el
    deactivate el
    deactivate idx
    prs -> db: Update Household Member Data
    activate db
    deactivate db
    deactivate prs
end
@enduml

@startuml
title Household Member - Update
skinparam BackgroundColor FFFFFF
skinparam shadowing false
skinparam RoundCorner 7
skinparam ArrowColor 454645
skinparam FontColor 454645
skinparam SequenceLifeLineBorderColor 696969
skinparam SequenceGroupHeaderFontColor 454645
skinparam SequenceGroupFontColor 696969
skinparam SequenceGroupBorderColor 696969
skinparam SequenceGroupBorderThickness 1

skinparam sequenceDivider {
    BorderColor 454645
    BorderThickness 1
    FontColor 454645
}

skinparam participant {
    BackgroundColor FF6347
    BorderColor 454645
    FontColor FFFFFF
    BorderThickness 1.5
}

skinparam database {
    BackgroundColor 00FFFF
    BorderColor 454645
    FontColor 454645
}

skinparam entity {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam note {
    BackgroundColor 7FFFD4
    BorderColor 454645
    FontColor 454645
    BorderThickness 1.5
}

skinparam actor {
    BackgroundColor 454645
    BorderColor 454645
    FontColor 454645
}

skinparam boundary {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam control {
    BackgroundColor FFE552
    BorderColor 454645
    FontColor 454645
}

skinparam collections {
    BackgroundColor FF5F42
    BorderColor 454645
    FontColor 454645
}

skinparam queue {
    BackgroundColor FF6347
    BorderColor 454645
    FontColor FFF
    BorderThickness 1.5
}
participant Client as c
participant HouseholdRegistry as s
participant RedisCache as rc
queue Kafka as k
participant PersisterService as prs
participant IndexerService as idx
participant ErrorService as es
participant ElasticSearch as el
database Database as db
c -> s : /household/member/v1/_update
activate s
s -> s: Validate request body
alt request validation fails
    s -> s: Request validation failed
    s -> k: Household Member Data /error_topic
    note left
        This will be marked as unrecoverable right away 
        and require manual intervention
    end note
    activate k
    group async
        es -> k: Consume Household Member Data
        activate es
        deactivate k
        es -> db: Persist Household Member Data /error_table
        activate db
        deactivate db
        deactivate es
    end
    s -> c: HttpStatus: 400 with appropriate error code
    note left
        Error Code: REQUEST_VALIDATION_FAILED
    end note
end
s -> s: Request validation successful
alt mapping record doesn't exist
  s -> db: Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId
  activate db
  db -> s: 0 rows
  deactivate db
  s -> k: Household Member Data /error_topic
  note left
      This will be marked as recoverable and will be
      retried later
  end note
  activate k
  group async
      es -> k: Consume Household Member Data
      activate es
      deactivate k
      es -> db: Persist Household Member Data /error_table
      activate db
      deactivate db
      deactivate es
  end
  s -> c: HttpStatus: 400 with appropriate error code
  note left
      Error Code: DEPENDENCY_ERROR
  end note
end
s -> db: Get Individual/Household mapping using household and individual clientReferenceId/serverGeneratedId
activate db
db -> s: 1 row
deactivate db
alt incorrect rowVersion
    s -> s: Compare rowVersion between request and db
    s -> s: Incorrect rowVersion [request: should be +1 only]
    s -> k: Household Member Data /error_topic
    group async
        es -> k: Consume Household Member Data
        activate es
        deactivate k
        es -> db: Persist Household Member Data /error_table
        activate db
        deactivate db
        deactivate es
    end
    s -> c: HttpStatus: 400 with appropriate error code
    note left
      Error Code: BAD_REQUEST
    end note
end
s -> s: Compare rowVersion between request and db
s -> s: rowVersion in request = rowVersion in db + 1
s -> k: Household Member Data /update_topic
activate k
s -> rc: Update new record in cache against clientReferenceId/serverGeneratedId
activate rc
deactivate rc
s -> c: HttpStatus: 202 ACCEPTED
deactivate s
group async
    prs -> k: Consume Household Member Data
    activate prs
    idx -> k: Consume Household Member Data
    deactivate k
    activate idx
    idx -> el: Store Household Member Data
    activate el
    deactivate el
    deactivate idx
    prs -> db: Update Household Member Data
    activate db
    deactivate db
    deactivate prs
end
@enduml

PlantUML version 1.2022.12(Sun Oct 23 23:42:26 IST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>