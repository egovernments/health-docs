<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="955px" preserveAspectRatio="none" style="width:1675px;height:955px;background:#FFFFFF;" version="1.1" viewBox="0 0 1675 955" width="1675px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="259" x="707" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="249" x="712" y="27.9951">Create Household Registration</text><rect fill="#FFFFFF" height="797.5859" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="349.5" x2="349.5" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="563" x2="563" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="689" x2="689" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="973.5" x2="973.5" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1153.5" x2="1153.5" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1231.5" x2="1231.5" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1552" x2="1552" y1="73.5938" y2="920.3125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1635" x2="1635" y1="73.5938" y2="920.3125"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="62.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="939.3076">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="285.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="292.5" y="62.292">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="285.5" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="292.5" y="939.3076">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="522" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="529" y="62.292">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="522" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="529" y="939.3076">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="615" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="622" y="62.292">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="615" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="622" y="939.3076">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="903.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="910.5" y="62.292">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="903.5" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="910.5" y="939.3076">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1113.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1120.5" y="62.292">IdGenSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1113.5" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1120.5" y="939.3076">IdGenSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1204.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1211.5" y="62.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1204.5" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1211.5" y="939.3076">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1513" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1520" y="62.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1513" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1520" y="939.3076">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1601" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1608" y="62.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1601" y="919.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1608" y="939.3076">Indexer</text><rect fill="#FFFFFF" height="797.5859" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><polygon fill="#181818" points="332.5,100.7266,342.5,104.7266,332.5,108.7266,336.5,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="338.5" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="40.5" y="99.6606">Household Registration</text><polygon fill="#181818" points="551.5,129.8594,561.5,133.8594,551.5,137.8594,555.5,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="557.5" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="361.5" y="128.7935">Fetch Config</text><polygon fill="#181818" points="365.5,158.9922,355.5,162.9922,365.5,166.9922,361.5,162.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359.5" x2="562.5" y1="162.9922" y2="162.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="371.5" y="157.9263">mdms data</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="207.2578" y2="207.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="207.2578" y2="220.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="220.2578" y2="220.2578"/><polygon fill="#181818" points="365.5,216.2578,355.5,220.2578,365.5,224.2578,361.5,220.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="361.5" y="187.0591">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="361.5" y="202.1919">Request</text><polygon fill="#181818" points="677,245.3906,687,249.3906,677,253.3906,681,249.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="683" y1="249.3906" y2="249.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="361.5" y="244.3247">Create Household</text><polygon fill="#181818" points="962,274.5234,972,278.5234,962,282.5234,966,278.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="968" y1="278.5234" y2="278.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="696" y="273.4575">Create Individual(s)</text><polygon fill="#181818" points="1142,303.6563,1152,307.6563,1142,311.6563,1146,307.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="974" x2="1148" y1="307.6563" y2="307.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="981" y="302.5903">Generate Individual Id(s)</text><polygon fill="#181818" points="1220,332.7891,1230,336.7891,1220,340.7891,1224,336.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="974" x2="1226" y1="336.7891" y2="336.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="981" y="331.7231">(async) Produce Individual Data</text><polygon fill="#181818" points="1243,361.9219,1233,365.9219,1243,369.9219,1239,365.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1551" y1="365.9219" y2="365.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1249" y="360.856">(async) Consume Individual Data</text><polygon fill="#181818" points="1243,391.0547,1233,395.0547,1243,399.0547,1239,395.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1634" y1="395.0547" y2="395.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1249" y="389.9888">(async) Consume Individual Data</text><polygon fill="#181818" points="700,420.1875,690,424.1875,700,428.1875,696,424.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="694" x2="973" y1="424.1875" y2="424.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="706" y="419.1216">Individuals</text><polygon fill="#181818" points="1142,449.3203,1152,453.3203,1142,457.3203,1146,453.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="1148" y1="453.3203" y2="453.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="696" y="448.2544">Generate Household Id</text><polygon fill="#181818" points="1220,478.4531,1230,482.4531,1220,486.4531,1224,482.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="1226" y1="482.4531" y2="482.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="696" y="477.3872">(async) Produce Household Data</text><polygon fill="#181818" points="1243,507.5859,1233,511.5859,1243,515.5859,1239,511.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1551" y1="511.5859" y2="511.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1249" y="506.52">(async) Consume Household Data</text><polygon fill="#181818" points="1243,536.7188,1233,540.7188,1243,544.7188,1239,540.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1634" y1="540.7188" y2="540.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1249" y="535.6528">(async) Consume Household Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="731" y1="569.8516" y2="569.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="731" x2="731" y1="569.8516" y2="582.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="690" x2="731" y1="582.8516" y2="582.8516"/><polygon fill="#181818" points="700,578.8516,690,582.8516,700,586.8516,696,582.8516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="696" y="564.7856">Create household-individual mapping data</text><polygon fill="#181818" points="1220,607.9844,1230,611.9844,1220,615.9844,1224,611.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="1226" y1="611.9844" y2="611.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="696" y="606.9185">(async) Produce Household-Individual mapping data</text><polygon fill="#181818" points="1243,637.1172,1233,641.1172,1243,645.1172,1239,641.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1551" y1="641.1172" y2="641.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1249" y="636.0513">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="1243,666.25,1233,670.25,1243,674.25,1239,670.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1634" y1="670.25" y2="670.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1249" y="665.1841">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="1142,695.3828,1152,699.3828,1142,703.3828,1146,699.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="1148" y1="699.3828" y2="699.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="361.5" y="694.3169">Generate household registration id</text><polygon fill="#181818" points="365.5,724.5156,355.5,728.5156,365.5,732.5156,361.5,728.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359.5" x2="1153" y1="728.5156" y2="728.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="371.5" y="723.4497">Household registration id</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="757.6484" y2="757.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="757.6484" y2="770.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="770.6484" y2="770.6484"/><polygon fill="#181818" points="365.5,766.6484,355.5,770.6484,365.5,774.6484,361.5,770.6484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="361.5" y="752.5825">Create household registration</text><polygon fill="#181818" points="1220,795.7813,1230,799.7813,1220,803.7813,1224,799.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="1226" y1="799.7813" y2="799.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="361.5" y="794.7153">(async) Produce Household registration data</text><polygon fill="#181818" points="1243,824.9141,1233,828.9141,1243,832.9141,1239,828.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1551" y1="828.9141" y2="828.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="1249" y="823.8481">(async) Consume Household registration Data</text><polygon fill="#181818" points="1243,854.0469,1233,858.0469,1243,862.0469,1239,858.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1634" y1="858.0469" y2="858.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="1249" y="852.981">(async) Consume Household registration Data</text><polygon fill="#181818" points="44.5,898.3125,34.5,902.3125,44.5,906.3125,40.5,902.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="348.5" y1="902.3125" y2="902.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="50.5" y="882.1138">HTTP Status OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="50.5" y="897.2466">Return Payload with householdRegistrationId</text><!--MD5=[91ac50fc168da24944c6ed63c5b2273d]
@startuml
title Create Household Registration

Client->RegistrationSvc ++:Household Registration
RegistrationSvc->MDMSSvc: Fetch Config
MDMSSvc- ->RegistrationSvc: mdms data
RegistrationSvc->RegistrationSvc: Validate\nRequest
RegistrationSvc->HouseholdRegistry: Create Household
HouseholdRegistry->IndividualRegistry: Create Individual(s)
IndividualRegistry->IdGenSvc: Generate Individual Id(s)
IndividualRegistry->Kafka: (async) Produce Individual Data
Kafka<-Persister: (async) Consume Individual Data
Kafka<-Indexer: (async) Consume Individual Data
HouseholdRegistry<- -IndividualRegistry: Individuals
HouseholdRegistry->IdGenSvc: Generate Household Id
HouseholdRegistry->Kafka: (async) Produce Household Data
Kafka<-Persister: (async) Consume Household Data
Kafka<-Indexer: (async) Consume Household Data
HouseholdRegistry->HouseholdRegistry: Create household-individual mapping data
HouseholdRegistry->Kafka: (async) Produce Household-Individual mapping data
Kafka<-Persister: (async) Consume Household-Individual Data
Kafka<-Indexer: (async) Consume Household-Individual Data
RegistrationSvc->IdGenSvc: Generate household registration id
IdGenSvc- ->RegistrationSvc: Household registration id
RegistrationSvc->RegistrationSvc: Create household registration
RegistrationSvc->Kafka: (async) Produce Household registration data
Kafka<-Persister: (async) Consume Household registration Data
Kafka<-Indexer: (async) Consume Household registration Data
RegistrationSvc->Client - -: HTTP Status OK\nReturn Payload with householdRegistrationId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>