<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="433px" preserveAspectRatio="none" style="width:1036px;height:433px;background:#FFFFFF;" version="1.1" viewBox="0 0 1036 433" width="1036px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="132" x="451.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122" x="456.25" y="27.9951">Create Delivery</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="342.5" x2="342.5" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="479.5" x2="479.5" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="545.5" x2="545.5" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="614" x2="614" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="913.5" x2="913.5" y1="73.5938" y2="397.9219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="996.5" x2="996.5" y1="73.5938" y2="397.9219"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="62.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="416.917">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="293.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="300.5" y="62.292">DeliverySvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="293.5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="300.5" y="416.917">DeliverySvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="451.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="458.5" y="62.292">Mdms</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="451.5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="458.5" y="416.917">Mdms</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="517.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="524.5" y="62.292">IdGen</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="517.5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="524.5" y="416.917">IdGen</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="587" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="594" y="62.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="587" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="594" y="416.917">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="874.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="881.5" y="62.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="874.5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="881.5" y="416.917">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="962.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="969.5" y="62.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="962.5" y="396.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="969.5" y="416.917">Indexer</text><polygon fill="#181818" points="330.5,100.7266,340.5,104.7266,330.5,108.7266,334.5,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="336.5" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="40.5" y="99.6606">Create delivery</text><polygon fill="#181818" points="467.5,129.8594,477.5,133.8594,467.5,137.8594,471.5,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="473.5" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="349.5" y="128.7935">Fetch mdms data</text><polygon fill="#181818" points="353.5,158.9922,343.5,162.9922,353.5,166.9922,349.5,162.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347.5" x2="478.5" y1="162.9922" y2="162.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="359.5" y="157.9263">Get mdms data</text><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="384.5" y1="192.125" y2="192.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="384.5" x2="384.5" y1="192.125" y2="205.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="343.5" x2="384.5" y1="205.125" y2="205.125"/><polygon fill="#181818" points="353.5,201.125,343.5,205.125,353.5,209.125,349.5,205.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="349.5" y="187.0591">Validate request</text><polygon fill="#181818" points="533.5,230.2578,543.5,234.2578,533.5,238.2578,537.5,234.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="539.5" y1="234.2578" y2="234.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="349.5" y="229.1919">Generate delivery id</text><polygon fill="#181818" points="353.5,259.3906,343.5,263.3906,353.5,267.3906,349.5,263.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347.5" x2="544.5" y1="263.3906" y2="263.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="359.5" y="258.3247">Delivery id</text><polygon fill="#181818" points="602.5,288.5234,612.5,292.5234,602.5,296.5234,606.5,292.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="608.5" y1="292.5234" y2="292.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="349.5" y="287.4575">(async) Produce delivery data to kafka</text><polygon fill="#181818" points="625.5,317.6563,615.5,321.6563,625.5,325.6563,621.5,321.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="619.5" x2="912.5" y1="321.6563" y2="321.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="631.5" y="316.5903">(async) Consume delivery data from kafka</text><polygon fill="#181818" points="625.5,346.7891,615.5,350.7891,625.5,354.7891,621.5,350.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="619.5" x2="995.5" y1="350.7891" y2="350.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="631.5" y="345.7231">(async) Consume delivery data from kafka</text><polygon fill="#181818" points="44.5,375.9219,34.5,379.9219,44.5,383.9219,40.5,379.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38.5" x2="341.5" y1="379.9219" y2="379.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="50.5" y="374.856">HttpStatus Ok - Delivery data with deliveryId</text><!--MD5=[91fc54bf52898ba0b42f595d6cd2b9b2]
@startuml
title Create Delivery

Client -> DeliverySvc : Create delivery
DeliverySvc -> Mdms : Fetch mdms data
DeliverySvc <- - Mdms : Get mdms data
DeliverySvc -> DeliverySvc : Validate request
DeliverySvc -> IdGen : Generate delivery id
DeliverySvc <- - IdGen : Delivery id
DeliverySvc -> Kafka : (async) Produce delivery data to kafka
Kafka <- Persister : (async) Consume delivery data from kafka
Kafka <- Indexer : (async) Consume delivery data from kafka
Client <- - DeliverySvc : HttpStatus Ok - Delivery data with deliveryId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>