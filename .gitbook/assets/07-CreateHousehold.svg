<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="793px" preserveAspectRatio="none" style="width:1405px;height:793px;background:#FFFFFF;" version="1.1" viewBox="0 0 1405 793" width="1405px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="152" x="625.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="630.75" y="27.9951">Create Household</text><rect fill="#FFFFFF" height="635.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="267.5" y="104.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="272.5" x2="272.5" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="567" x2="567" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="747" x2="747" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="974" x2="974" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1282.5" x2="1282.5" y1="73.5938" y2="758.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1365.5" x2="1365.5" y1="73.5938" y2="758.5156"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="62.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="777.5107">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="198.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="205.5" y="62.292">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="198.5" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="205.5" y="777.5107">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="527" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="534" y="62.292">IdGenSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="527" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="534" y="777.5107">IdGenSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="677" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="684" y="62.292">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="677" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="684" y="777.5107">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="947" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="954" y="62.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="947" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="954" y="777.5107">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1243.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1250.5" y="62.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1243.5" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1250.5" y="777.5107">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1331.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1338.5" y="62.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1331.5" y="757.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1338.5" y="777.5107">Indexer</text><rect fill="#FFFFFF" height="635.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="267.5" y="104.7266"/><polygon fill="#181818" points="255.5,100.7266,265.5,104.7266,255.5,108.7266,259.5,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="261.5" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="40.5" y="99.6606">Household</text><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="319.5" y1="148.9922" y2="148.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="319.5" y1="148.9922" y2="161.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="319.5" y1="161.9922" y2="161.9922"/><polygon fill="#181818" points="288.5,157.9922,278.5,161.9922,288.5,165.9922,284.5,161.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="284.5" y="128.7935">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="284.5" y="143.9263">Request</text><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="319.5" y1="191.125" y2="191.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="319.5" y1="191.125" y2="204.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="319.5" y1="204.125" y2="204.125"/><polygon fill="#181818" points="288.5,200.125,278.5,204.125,288.5,208.125,284.5,204.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="284.5" y="186.0591">Check if record already exists</text><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="319.5" y1="233.2578" y2="233.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="319.5" y1="233.2578" y2="246.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="319.5" y1="246.2578" y2="246.2578"/><polygon fill="#181818" points="288.5,242.2578,278.5,246.2578,288.5,250.2578,284.5,246.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="284.5" y="228.1919">Create Household</text><polygon fill="#181818" points="555.5,271.3906,565.5,275.3906,555.5,279.3906,559.5,275.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="561.5" y1="275.3906" y2="275.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="284.5" y="270.3247">Generate Household Id</text><polygon fill="#181818" points="735.5,300.5234,745.5,304.5234,735.5,308.5234,739.5,304.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="741.5" y1="304.5234" y2="304.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="284.5" y="299.4575">Check if record already exists</text><polygon fill="#181818" points="735.5,329.6563,745.5,333.6563,735.5,337.6563,739.5,333.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="741.5" y1="333.6563" y2="333.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="284.5" y="328.5903">Create Individual(s)</text><polygon fill="#181818" points="578.5,358.7891,568.5,362.7891,578.5,366.7891,574.5,362.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="572.5" x2="746.5" y1="362.7891" y2="362.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="584.5" y="357.7231">Generate Individual Id(s)</text><polygon fill="#181818" points="962.5,387.9219,972.5,391.9219,962.5,395.9219,966.5,391.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747.5" x2="968.5" y1="391.9219" y2="391.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="754.5" y="386.856">(async) Produce Individual Data</text><polygon fill="#181818" points="985.5,417.0547,975.5,421.0547,985.5,425.0547,981.5,421.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1281.5" y1="421.0547" y2="421.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="991.5" y="415.9888">(async) Consume Individual Data</text><polygon fill="#181818" points="985.5,446.1875,975.5,450.1875,985.5,454.1875,981.5,450.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1364.5" y1="450.1875" y2="450.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="991.5" y="445.1216">(async) Consume Individual Data</text><polygon fill="#181818" points="288.5,475.3203,278.5,479.3203,288.5,483.3203,284.5,479.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="282.5" x2="746.5" y1="479.3203" y2="479.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="294.5" y="474.2544">Individuals</text><polygon fill="#181818" points="962.5,504.4531,972.5,508.4531,962.5,512.4531,966.5,508.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="968.5" y1="508.4531" y2="508.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="284.5" y="503.3872">(async) Produce Household Data</text><polygon fill="#181818" points="985.5,533.5859,975.5,537.5859,985.5,541.5859,981.5,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1281.5" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="991.5" y="532.52">(async) Consume Household Data</text><polygon fill="#181818" points="985.5,562.7188,975.5,566.7188,985.5,570.7188,981.5,566.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1364.5" y1="566.7188" y2="566.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="991.5" y="561.6528">(async) Consume Household Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="319.5" y1="595.8516" y2="595.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="319.5" y1="595.8516" y2="608.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="319.5" y1="608.8516" y2="608.8516"/><polygon fill="#181818" points="288.5,604.8516,278.5,608.8516,288.5,612.8516,284.5,608.8516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="284.5" y="590.7856">Create household-individual mapping data</text><polygon fill="#181818" points="962.5,633.9844,972.5,637.9844,962.5,641.9844,966.5,637.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="968.5" y1="637.9844" y2="637.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="284.5" y="632.9185">(async) Produce Household-Individual mapping data</text><polygon fill="#181818" points="985.5,663.1172,975.5,667.1172,985.5,671.1172,981.5,667.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1281.5" y1="667.1172" y2="667.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="991.5" y="662.0513">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="985.5,692.25,975.5,696.25,985.5,700.25,981.5,696.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="979.5" x2="1364.5" y1="696.25" y2="696.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="991.5" y="691.1841">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="44.5,736.5156,34.5,740.5156,44.5,744.5156,40.5,740.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="271.5" y1="740.5156" y2="740.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="50.5" y="720.3169">HTTP Status OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="50.5" y="735.4497">Return Payload with householdId</text><!--MD5=[be0b4cdddbda3db4dc86220dcf89241f]
@startuml
title Create Household

Client->HouseholdRegistry ++:Household
HouseholdRegistry->HouseholdRegistry: Validate\nRequest
HouseholdRegistry->HouseholdRegistry: Check if record already exists
HouseholdRegistry->HouseholdRegistry: Create Household
HouseholdRegistry->IdGenSvc: Generate Household Id
HouseholdRegistry->IndividualRegistry: Check if record already exists
HouseholdRegistry->IndividualRegistry: Create Individual(s)
IndividualRegistry->IdGenSvc: Generate Individual Id(s)
IndividualRegistry->Kafka: (async) Produce Individual Data
Kafka<-Persister: (async) Consume Individual Data
Kafka<-Indexer: (async) Consume Individual Data
HouseholdRegistry<- -IndividualRegistry: Individuals
HouseholdRegistry->Kafka: (async) Produce Household Data
Kafka<-Persister: (async) Consume Household Data
Kafka<-Indexer: (async) Consume Household Data
HouseholdRegistry->HouseholdRegistry: Create household-individual mapping data
HouseholdRegistry->Kafka: (async) Produce Household-Individual mapping data
Kafka<-Persister: (async) Consume Household-Individual Data
Kafka<-Indexer: (async) Consume Household-Individual Data
HouseholdRegistry->Client - -: HTTP Status OK\nReturn Payload with householdId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>