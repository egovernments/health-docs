<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1155px" preserveAspectRatio="none" style="width:1581px;height:1155px;background:#FFFFFF;" version="1.1" viewBox="0 0 1581 1155" width="1581px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="264" x="660" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="254" x="665" y="27.9951">Update Household Registration</text><rect fill="#FFFFFF" height="997.25" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><rect fill="none" height="434.8594" style="stroke:#000000;stroke-width:1.5;" width="1299.5" x="275.5" y="235.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="349.5" x2="349.5" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="532" x2="532" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="658" x2="658" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="912.5" x2="912.5" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1139.5" x2="1139.5" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1448" x2="1448" y1="73.5938" y2="1119.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1531" x2="1531" y1="73.5938" y2="1119.9766"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="62.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="1138.9717">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="285.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="292.5" y="62.292">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="285.5" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="292.5" y="1138.9717">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="491" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="498" y="62.292">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="491" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="498" y="1138.9717">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="584" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="591" y="62.292">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="584" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="591" y="1138.9717">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="842.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="849.5" y="62.292">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="842.5" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="849.5" y="1138.9717">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1112.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1119.5" y="62.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1112.5" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1119.5" y="1138.9717">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1409" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1416" y="62.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1409" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1416" y="1138.9717">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1497" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1504" y="62.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1497" y="1118.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1504" y="1138.9717">Indexer</text><rect fill="#FFFFFF" height="997.25" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><polygon fill="#181818" points="332.5,100.7266,342.5,104.7266,332.5,108.7266,336.5,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="338.5" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="40.5" y="99.6606">Update Household Registration</text><polygon fill="#181818" points="520.5,129.8594,530.5,133.8594,520.5,137.8594,524.5,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="526.5" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="361.5" y="128.7935">Fetch Config</text><polygon fill="#181818" points="365.5,158.9922,355.5,162.9922,365.5,166.9922,361.5,162.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359.5" x2="531.5" y1="162.9922" y2="162.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="371.5" y="157.9263">mdms data</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="207.2578" y2="207.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="207.2578" y2="220.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="220.2578" y2="220.2578"/><polygon fill="#181818" points="365.5,216.2578,355.5,220.2578,365.5,224.2578,361.5,220.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="361.5" y="187.0591">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="361.5" y="202.1919">Request</text><path d="M275.5,235.2578 L347.5,235.2578 L347.5,242.3906 L337.5,252.3906 L275.5,252.3906 L275.5,235.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="434.8594" style="stroke:#000000;stroke-width:1.5;" width="1299.5" x="275.5" y="235.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="290.5" y="248.3247">opt</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="273.5234" y2="273.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="273.5234" y2="286.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="286.5234" y2="286.5234"/><polygon fill="#181818" points="365.5,282.5234,355.5,286.5234,365.5,290.5234,361.5,286.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="361.5" y="268.4575">Individual data changed?</text><polygon fill="#181818" points="646,311.6563,656,315.6563,646,319.6563,650,315.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="652" y1="315.6563" y2="315.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="361.5" y="310.5903">Fetch individual(s) to update</text><polygon fill="#181818" points="365.5,340.7891,355.5,344.7891,365.5,348.7891,361.5,344.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359.5" x2="657" y1="344.7891" y2="344.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="371.5" y="339.7231">Individual(s)</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="373.9219" y2="373.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="373.9219" y2="386.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="386.9219" y2="386.9219"/><polygon fill="#181818" points="365.5,382.9219,355.5,386.9219,365.5,390.9219,361.5,386.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="361.5" y="368.856">Update individual(s)</text><polygon fill="#181818" points="646,412.0547,656,416.0547,646,420.0547,650,416.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="652" y1="416.0547" y2="416.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="361.5" y="410.9888">Update household individual</text><polygon fill="#181818" points="901,441.1875,911,445.1875,901,449.1875,905,445.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="907" y1="445.1875" y2="445.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="665" y="440.1216">Update individual</text><polygon fill="#181818" points="1128,470.3203,1138,474.3203,1128,478.3203,1132,474.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="913" x2="1134" y1="474.3203" y2="474.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="920" y="469.2544">(async) Produce Individual Data</text><polygon fill="#181818" points="1151,499.4531,1141,503.4531,1151,507.4531,1147,503.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1447" y1="503.4531" y2="503.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1157" y="498.3872">(async) Consume Individual Data</text><polygon fill="#181818" points="1151,528.5859,1141,532.5859,1151,536.5859,1147,532.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1530" y1="532.5859" y2="532.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1157" y="527.52">(async) Consume Individual Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="700" y1="561.7188" y2="561.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="700" x2="700" y1="561.7188" y2="574.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="659" x2="700" y1="574.7188" y2="574.7188"/><polygon fill="#181818" points="669,570.7188,659,574.7188,669,578.7188,665,574.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="665" y="556.6528">Update Household Individual mapping</text><polygon fill="#181818" points="1128,599.8516,1138,603.8516,1128,607.8516,1132,603.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="1134" y1="603.8516" y2="603.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="665" y="598.7856">(async) Produce Household-Individual mapping data</text><polygon fill="#181818" points="1151,628.9844,1141,632.9844,1151,636.9844,1147,632.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1447" y1="632.9844" y2="632.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1157" y="627.9185">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="1151,658.1172,1141,662.1172,1151,666.1172,1147,662.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1530" y1="662.1172" y2="662.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1157" y="657.0513">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="646,694.25,656,698.25,646,702.25,650,698.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="652" y1="698.25" y2="698.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="361.5" y="693.1841">Fetch household</text><polygon fill="#181818" points="365.5,723.3828,355.5,727.3828,365.5,731.3828,361.5,727.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359.5" x2="657" y1="727.3828" y2="727.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="371.5" y="722.3169">Household</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="756.5156" y2="756.5156"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="756.5156" y2="769.5156"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="769.5156" y2="769.5156"/><polygon fill="#181818" points="365.5,765.5156,355.5,769.5156,365.5,773.5156,361.5,769.5156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="361.5" y="751.4497">Update household</text><polygon fill="#181818" points="646,794.6484,656,798.6484,646,802.6484,650,798.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="652" y1="798.6484" y2="798.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="361.5" y="793.5825">Update household</text><polygon fill="#181818" points="1128,823.7813,1138,827.7813,1128,831.7813,1132,827.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="1134" y1="827.7813" y2="827.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="665" y="822.7153">(async) Produce Household Data</text><polygon fill="#181818" points="1151,852.9141,1141,856.9141,1151,860.9141,1147,856.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1447" y1="856.9141" y2="856.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1157" y="851.8481">(async) Consume Household Data</text><polygon fill="#181818" points="1151,882.0469,1141,886.0469,1151,890.0469,1147,886.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1530" y1="886.0469" y2="886.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1157" y="880.981">(async) Consume Household Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="915.1797" y2="915.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="915.1797" y2="928.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="928.1797" y2="928.1797"/><polygon fill="#181818" points="365.5,924.1797,355.5,928.1797,365.5,932.1797,361.5,928.1797" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="361.5" y="910.1138">Fetch registration</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="957.3125" y2="957.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="957.3125" y2="970.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="970.3125" y2="970.3125"/><polygon fill="#181818" points="365.5,966.3125,355.5,970.3125,365.5,974.3125,361.5,970.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="361.5" y="952.2466">Update registration</text><polygon fill="#181818" points="1128,995.4453,1138,999.4453,1128,1003.4453,1132,999.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="1134" y1="999.4453" y2="999.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="665" y="994.3794">(async) Produce Registration Data</text><polygon fill="#181818" points="1151,1024.5781,1141,1028.5781,1151,1032.5781,1147,1028.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1447" y1="1028.5781" y2="1028.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="1157" y="1023.5122">(async) Consume Registration Data</text><polygon fill="#181818" points="1151,1053.7109,1141,1057.7109,1151,1061.7109,1147,1057.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145" x2="1530" y1="1057.7109" y2="1057.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="1157" y="1052.645">(async) Consume Registration Data</text><polygon fill="#181818" points="44.5,1097.9766,34.5,1101.9766,44.5,1105.9766,40.5,1101.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="348.5" y1="1101.9766" y2="1101.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="50.5" y="1081.7778">HTTP Status OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="50.5" y="1096.9106">Return Payload with householdRegistrationId</text><!--MD5=[fec7d08ca74f41caed40dd1916865536]
@startuml
title Update Household Registration

Client->RegistrationSvc ++:Update Household Registration
RegistrationSvc->MDMSSvc: Fetch Config
MDMSSvc- ->RegistrationSvc: mdms data
RegistrationSvc->RegistrationSvc: Validate\nRequest
opt
RegistrationSvc->RegistrationSvc: Individual data changed?
RegistrationSvc->HouseholdRegistry: Fetch individual(s) to update
RegistrationSvc<- -HouseholdRegistry: Individual(s)
RegistrationSvc->RegistrationSvc: Update individual(s)
RegistrationSvc->HouseholdRegistry: Update household individual
HouseholdRegistry->IndividualRegistry: Update individual
IndividualRegistry->Kafka: (async) Produce Individual Data
Kafka<-Persister: (async) Consume Individual Data
Kafka<-Indexer: (async) Consume Individual Data
HouseholdRegistry->HouseholdRegistry: Update Household Individual mapping
HouseholdRegistry->Kafka: (async) Produce Household-Individual mapping data
Kafka<-Persister: (async) Consume Household-Individual Data
Kafka<-Indexer: (async) Consume Household-Individual Data
end
RegistrationSvc->HouseholdRegistry: Fetch household
RegistrationSvc<- -HouseholdRegistry: Household
RegistrationSvc->RegistrationSvc: Update household
RegistrationSvc->HouseholdRegistry: Update household
HouseholdRegistry->Kafka: (async) Produce Household Data
Kafka<-Persister: (async) Consume Household Data
Kafka<-Indexer: (async) Consume Household Data
RegistrationSvc->RegistrationSvc: Fetch registration
RegistrationSvc->RegistrationSvc: Update registration
HouseholdRegistry->Kafka: (async) Produce Registration Data
Kafka<-Persister: (async) Consume Registration Data
Kafka<-Indexer: (async) Consume Registration Data
RegistrationSvc->Client - -: HTTP Status OK\nReturn Payload with householdRegistrationId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>