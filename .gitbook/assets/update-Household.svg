<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1432px" preserveAspectRatio="none" style="width:1952px;height:1432px;background:#FFFFFF;" version="1.1" viewBox="0 0 1952 1432" width="1952px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="898.75" y="27.9951">Household - Update</text><rect fill="#FFFFFF" height="992.7188" style="stroke:#696969;stroke-width:1.0;" width="10" x="627.5" y="135.7266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="381.6563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="564.4531"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="680.9844"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="747.1172"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="1069.3125"/><rect fill="#FFFFFF" height="170.6641" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="1040.1797"/><rect fill="#FFFFFF" height="147.3984" style="stroke:#696969;stroke-width:1.0;" width="10" x="1419.5" y="1181.7109"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1554" y="1210.8438"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1792.5" y="1239.9766"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="439.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="622.7188"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="1299.1094"/><rect fill="none" height="94.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="810.5" x="9" y="192.8594"/><rect fill="none" height="168.7969" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1881.5" x="65" y="343.3906"/><rect fill="none" height="192.7969" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1398" x="548.5" y="526.1875"/><rect fill="none" height="136.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="866.5" x="113" y="791.25"/><rect fill="none" height="193.6641" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="760" x="1186.5" y="1143.4453"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="321" x2="321" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="632.5" x2="632.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1137.5" x2="1137.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1226.5" x2="1226.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1424.5" x2="1424.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1558.5" x2="1558.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1680.5" x2="1680.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1797.5" x2="1797.5" y1="104.5938" y2="1354.1094"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1899.5" x2="1899.5" y1="104.5938" y2="1354.1094"/><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="55" x="294" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="301" y="93.292">Client</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="55" x="294" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="301" y="1373.1045">Client</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="558.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="565.5" y="93.292">HouseholdRegistry</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="558.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="565.5" y="1373.1045">HouseholdRegistry</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="98" x="1088.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1095.5" y="93.292">RedisCache</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="98" x="1088.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1095.5" y="1373.1045">RedisCache</text><path d="M1201.5,78.2969 L1251.5,78.2969 C1256.5,78.2969 1256.5,91.4453 1256.5,91.4453 C1256.5,91.4453 1256.5,104.5938 1251.5,104.5938 L1201.5,104.5938 C1196.5,104.5938 1196.5,91.4453 1196.5,91.4453 C1196.5,91.4453 1196.5,78.2969 1201.5,78.2969 " fill="#FF6347" style="stroke:#454645;stroke-width:1.5;"/><path d="M1251.5,78.2969 C1246.5,78.2969 1246.5,91.4453 1246.5,91.4453 C1246.5,104.5938 1251.5,104.5938 1251.5,104.5938 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1201.5" y="96.292">Kafka</text><path d="M1201.5,1353.1094 L1251.5,1353.1094 C1256.5,1353.1094 1256.5,1366.2578 1256.5,1366.2578 C1256.5,1366.2578 1256.5,1379.4063 1251.5,1379.4063 L1201.5,1379.4063 C1196.5,1379.4063 1196.5,1366.2578 1196.5,1366.2578 C1196.5,1366.2578 1196.5,1353.1094 1201.5,1353.1094 " fill="#FF6347" style="stroke:#454645;stroke-width:1.5;"/><path d="M1251.5,1353.1094 C1246.5,1353.1094 1246.5,1366.2578 1246.5,1366.2578 C1246.5,1379.4063 1251.5,1379.4063 1251.5,1379.4063 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1201.5" y="1371.1045">Kafka</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="128" x="1360.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1367.5" y="93.292">PersisterService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="128" x="1360.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1367.5" y="1373.1045">PersisterService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="121" x="1498.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1505.5" y="93.292">IndexerService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="121" x="1498.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1505.5" y="1373.1045">IndexerService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="103" x="1629.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1636.5" y="93.292">ErrorService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="103" x="1629.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1636.5" y="1373.1045">ErrorService</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="110" x="1742.5" y="73.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1749.5" y="93.292">ElasticSearch</text><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="110" x="1742.5" y="1353.1094"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1749.5" y="1373.1045">ElasticSearch</text><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1862.5" y="101.292">Database</text><path d="M1881.5,52.2969 C1881.5,42.2969 1899.5,42.2969 1899.5,42.2969 C1899.5,42.2969 1917.5,42.2969 1917.5,52.2969 L1917.5,78.2969 C1917.5,88.2969 1899.5,88.2969 1899.5,88.2969 C1899.5,88.2969 1881.5,88.2969 1881.5,78.2969 L1881.5,52.2969 " fill="#00FFFF" style="stroke:#454645;stroke-width:1.5;"/><path d="M1881.5,52.2969 C1881.5,62.2969 1899.5,62.2969 1899.5,62.2969 C1899.5,62.2969 1917.5,62.2969 1917.5,52.2969 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1862.5" y="1366.1045">Database</text><path d="M1881.5,1379.4063 C1881.5,1369.4063 1899.5,1369.4063 1899.5,1369.4063 C1899.5,1369.4063 1917.5,1369.4063 1917.5,1379.4063 L1917.5,1405.4063 C1917.5,1415.4063 1899.5,1415.4063 1899.5,1415.4063 C1899.5,1415.4063 1881.5,1415.4063 1881.5,1405.4063 L1881.5,1379.4063 " fill="#00FFFF" style="stroke:#454645;stroke-width:1.5;"/><path d="M1881.5,1379.4063 C1881.5,1389.4063 1899.5,1389.4063 1899.5,1389.4063 C1899.5,1389.4063 1917.5,1389.4063 1917.5,1379.4063 " fill="none" style="stroke:#454645;stroke-width:1.5;"/><rect fill="#FFFFFF" height="992.7188" style="stroke:#696969;stroke-width:1.0;" width="10" x="627.5" y="135.7266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="381.6563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="564.4531"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="680.9844"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="747.1172"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1132.5" y="1069.3125"/><rect fill="#FFFFFF" height="170.6641" style="stroke:#696969;stroke-width:1.0;" width="10" x="1221.5" y="1040.1797"/><rect fill="#FFFFFF" height="147.3984" style="stroke:#696969;stroke-width:1.0;" width="10" x="1419.5" y="1181.7109"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1554" y="1210.8438"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1792.5" y="1239.9766"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="439.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="622.7188"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="1894.5" y="1299.1094"/><polygon fill="#454645" points="615.5,131.7266,625.5,135.7266,615.5,139.7266,619.5,135.7266" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="321.5" x2="621.5" y1="135.7266" y2="135.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="328.5" y="130.6606">/household/v1/_update</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="164.8594" y2="164.8594"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="164.8594" y2="177.8594"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="177.8594" y2="177.8594"/><polygon fill="#454645" points="648.5,173.8594,638.5,177.8594,648.5,181.8594,644.5,177.8594" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="644.5" y="159.7935">Validate request body</text><path d="M12.5,192.8594 L73,192.8594 L73,199.9922 L63,209.9922 L9,209.9922 L9,196.3594 A3.5,3.5 0 0 1 12.5,192.8594 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="94.3984" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="810.5" x="9" y="192.8594"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="24" y="205.9263">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="154" x="88" y="205.0698">[request validation fails]</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="231.125" y2="231.125"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="231.125" y2="244.125"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="244.125" y2="244.125"/><polygon fill="#454645" points="648.5,240.125,638.5,244.125,648.5,248.125,644.5,244.125" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="644.5" y="226.0591">Request validation failed</text><polygon fill="#454645" points="332.5,272.2578,322.5,276.2578,332.5,280.2578,328.5,276.2578" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="276.2578" y2="276.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="271.1919">HttpStatus: 400 with appropriate error code</text><path d="M19,260.625 L19,278.625 A3.5,3.5 0 0 0 22.5,282.125 L312.5,282.125 A3.5,3.5 0 0 0 316,278.625 L316,267.125 L306,257.125 L22.5,257.125 A3.5,3.5 0 0 0 19,260.625 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M306,257.125 L306,265.375 A1.75,1.75 0 0 0 307.75,267.125 L316,267.125 L306,257.125 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="25" y="274.1919">Error Code: REQUEST_VALIDATION_FAILED</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="315.3906" y2="315.3906"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="315.3906" y2="328.3906"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="328.3906" y2="328.3906"/><polygon fill="#454645" points="648.5,324.3906,638.5,328.3906,648.5,332.3906,644.5,328.3906" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="644.5" y="310.3247">Request validation successful</text><path d="M68.5,343.3906 L129,343.3906 L129,350.5234 L119,360.5234 L65,360.5234 L65,346.8906 A3.5,3.5 0 0 1 68.5,343.3906 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="168.7969" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1881.5" x="65" y="343.3906"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="80" y="356.4575">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134" x="144" y="355.6011">[record doesn't exist]</text><polygon fill="#454645" points="1120.5,377.6563,1130.5,381.6563,1120.5,385.6563,1124.5,381.6563" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="381.6563" y2="381.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="644.5" y="376.5903">Search record based on serverGeneratedId</text><polygon fill="#454645" points="648.5,406.7891,638.5,410.7891,648.5,414.7891,644.5,410.7891" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="1136.5" y1="410.7891" y2="410.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="654.5" y="405.7231">0 rows</text><polygon fill="#454645" points="1882.5,435.9219,1892.5,439.9219,1882.5,443.9219,1886.5,439.9219" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1888.5" y1="439.9219" y2="439.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="644.5" y="434.856">Search record based on serverGeneratedId</text><polygon fill="#454645" points="648.5,465.0547,638.5,469.0547,648.5,473.0547,644.5,469.0547" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="1898.5" y1="469.0547" y2="469.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="654.5" y="463.9888">0 row</text><polygon fill="#454645" points="332.5,497.1875,322.5,501.1875,332.5,505.1875,328.5,501.1875" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="501.1875" y2="501.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="496.1216">HttpStatus: 400 with appropriate error code</text><path d="M75,485.5547 L75,503.5547 A3.5,3.5 0 0 0 78.5,507.0547 L312.5,507.0547 A3.5,3.5 0 0 0 316,503.5547 L316,492.0547 L306,482.0547 L78.5,482.0547 A3.5,3.5 0 0 0 75,485.5547 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M306,482.0547 L306,490.3047 A1.75,1.75 0 0 0 307.75,492.0547 L316,492.0547 L306,482.0547 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="81" y="499.1216">Error Code: RECORD_NOT_FOUND</text><path d="M552,526.1875 L612.5,526.1875 L612.5,533.3203 L602.5,543.3203 L548.5,543.3203 L548.5,529.6875 A3.5,3.5 0 0 1 552,526.1875 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="192.7969" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="1398" x="548.5" y="526.1875"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="563.5" y="539.2544">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="627.5" y="538.3979">[record doesn't exists in cache]</text><polygon fill="#454645" points="1120.5,560.4531,1130.5,564.4531,1120.5,568.4531,1124.5,564.4531" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="564.4531" y2="564.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="644.5" y="559.3872">Search record based on clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="648.5,589.5859,638.5,593.5859,648.5,597.5859,644.5,593.5859" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="1136.5" y1="593.5859" y2="593.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="654.5" y="588.52">0 rows</text><polygon fill="#454645" points="1882.5,618.7188,1892.5,622.7188,1882.5,626.7188,1886.5,622.7188" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1888.5" y1="622.7188" y2="622.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="644.5" y="617.6528">Search record based on clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="648.5,647.8516,638.5,651.8516,648.5,655.8516,644.5,651.8516" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="1898.5" y1="651.8516" y2="651.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="654.5" y="646.7856">1 row</text><polygon fill="#454645" points="1120.5,676.9844,1130.5,680.9844,1120.5,684.9844,1124.5,680.9844" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="680.9844" y2="680.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="644.5" y="675.9185">1 record</text><polygon fill="#454645" points="1120.5,743.1172,1130.5,747.1172,1120.5,751.1172,1124.5,747.1172" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="747.1172" y2="747.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="644.5" y="742.0513">Fetch the existing record</text><polygon fill="#454645" points="648.5,772.25,638.5,776.25,648.5,780.25,644.5,776.25" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="642.5" x2="1136.5" y1="776.25" y2="776.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="654.5" y="771.1841">1 row</text><path d="M116.5,791.25 L177,791.25 L177,798.3828 L167,808.3828 L113,808.3828 L113,794.75 A3.5,3.5 0 0 1 116.5,791.25 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="136.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="866.5" x="113" y="791.25"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="128" y="804.3169">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141" x="192" y="803.4604">[incorrect rowVersion]</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="829.5156" y2="829.5156"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="829.5156" y2="842.5156"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="842.5156" y2="842.5156"/><polygon fill="#454645" points="648.5,838.5156,638.5,842.5156,648.5,846.5156,644.5,842.5156" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="824.4497">Compare rowVersion between request and db</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="871.6484" y2="871.6484"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="871.6484" y2="884.6484"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="884.6484" y2="884.6484"/><polygon fill="#454645" points="648.5,880.6484,638.5,884.6484,648.5,888.6484,644.5,884.6484" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="644.5" y="866.5825">Incorrect rowVersion [request: should be +1 only]</text><polygon fill="#454645" points="332.5,912.7813,322.5,916.7813,332.5,920.7813,328.5,916.7813" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="626.5" y1="916.7813" y2="916.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="338.5" y="911.7153">HttpStatus: 400 with appropriate error code</text><path d="M123,901.1484 L123,919.1484 A3.5,3.5 0 0 0 126.5,922.6484 L312.5,922.6484 A3.5,3.5 0 0 0 316,919.1484 L316,907.6484 L306,897.6484 L126.5,897.6484 A3.5,3.5 0 0 0 123,901.1484 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M306,897.6484 L306,905.8984 A1.75,1.75 0 0 0 307.75,907.6484 L316,907.6484 L306,897.6484 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="129" y="914.7153">Error Code: BAD_REQUEST</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="955.9141" y2="955.9141"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="955.9141" y2="968.9141"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="968.9141" y2="968.9141"/><polygon fill="#454645" points="648.5,964.9141,638.5,968.9141,648.5,972.9141,644.5,968.9141" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="950.8481">Compare rowVersion between request and db</text><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="679.5" y1="998.0469" y2="998.0469"/><line style="stroke:#454645;stroke-width:1.0;" x1="679.5" x2="679.5" y1="998.0469" y2="1011.0469"/><line style="stroke:#454645;stroke-width:1.0;" x1="638.5" x2="679.5" y1="1011.0469" y2="1011.0469"/><polygon fill="#454645" points="648.5,1007.0469,638.5,1011.0469,648.5,1015.0469,644.5,1011.0469" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="644.5" y="992.981">rowVersion in request = rowVersion in db + 1</text><polygon fill="#454645" points="1209.5,1036.1797,1219.5,1040.1797,1209.5,1044.1797,1213.5,1040.1797" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1215.5" y1="1040.1797" y2="1040.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="644.5" y="1035.1138">Household Data /update_topic</text><polygon fill="#454645" points="1120.5,1065.3125,1130.5,1069.3125,1120.5,1073.3125,1124.5,1069.3125" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="637.5" x2="1126.5" y1="1069.3125" y2="1069.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="476" x="644.5" y="1064.2466">Update new record in cache against clientReferenceId/serverGeneratedId</text><polygon fill="#454645" points="332.5,1124.4453,322.5,1128.4453,332.5,1132.4453,328.5,1128.4453" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="326.5" x2="631.5" y1="1128.4453" y2="1128.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="338.5" y="1123.3794">HttpStatus: 202 ACCEPTED</text><path d="M1190,1143.4453 L1273.5,1143.4453 L1273.5,1150.5781 L1263.5,1160.5781 L1186.5,1160.5781 L1186.5,1146.9453 A3.5,3.5 0 0 1 1190,1143.4453 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="193.6641" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="760" x="1186.5" y="1143.4453"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1201.5" y="1156.5122">async</text><polygon fill="#454645" points="1242.5,1177.7109,1232.5,1181.7109,1242.5,1185.7109,1238.5,1181.7109" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1236.5" x2="1418.5" y1="1181.7109" y2="1181.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1248.5" y="1176.645">Consume Household Data</text><polygon fill="#454645" points="1237.5,1206.8438,1227.5,1210.8438,1237.5,1214.8438,1233.5,1210.8438" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1231.5" x2="1553" y1="1210.8438" y2="1210.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1243.5" y="1205.7778">Consume Household Data</text><polygon fill="#454645" points="1780.5,1235.9766,1790.5,1239.9766,1780.5,1243.9766,1784.5,1239.9766" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1564" x2="1786.5" y1="1239.9766" y2="1239.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1571" y="1234.9106">Store Household Data</text><polygon fill="#454645" points="1882.5,1295.1094,1892.5,1299.1094,1882.5,1303.1094,1886.5,1299.1094" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="1429.5" x2="1888.5" y1="1299.1094" y2="1299.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1436.5" y="1294.0435">Update Household Data</text><!--SRC=[lLLBRnen4BxlhvYUUeWY8Ee9gPNeGXhKAAGySgcgbTSUm69ZRsqlX7_VyJvWTqD9KYdbWdVypOo_UJhf4eGRdLbSwqJ09InImHm67zmQ7n6sCZPCkI1bnaakKpf3c4YaFsQ1D-G7ArDSIUlCtaDi0p958Mt8-1hzdU71xmmpXEzikM5UiccWxz5OCeHcXcOhUQwJcgR5iHBur418yTH0Z8pHzNji6XWbpDB739dXw_m-2IW2B6OMOLWTI2xYWCFb5x3GXywwujhPzZfHLiGiODp9BPs8jSsXVNXWYVINO92uMWUn5lk09UuWs1O8gHKicKni0FIhrAUdGIYEADw76-VIcMCk8urFtIxif2CgQMfqQgHtZZu6mBN0N4zfaYMuTFaN5262aAx9u-Z7OZIRHm-3s_5mC1zFxgBhmVXsDCong4Ik7GHq2iwyqcQSexNBB2d9Scq428rMVNI0JvJN8mL37Ce4b40VT07U3YKEpJTKQ8Y861V43u6c4lBVXfSlwOBHkoA40jket9U8_zKN5K1kDwxxQhigGU-JcN0o7KPtatbqFLdSjHBYy_6tI5DJAE2-xLuLSvut-1INQ51n78lE_yp2cxstyz9xAI-UUg_qUv98yz67IlTwr-ZepJGSYyXAjQeCrLKEaIZUqhJdioGLwP2Yy_SFVivfrMZyK3_IbCBQDSJeTeZgC3WOfRvEYxJ69yp2prAX3vR65Wtv6E6YHw5Ezh_UhLY_3ePHEKgUr-dRILOQDQGyWZwtv5GA5z0hb3RzsdhpynmwnRYEd4ubFwPjSqnoiGD1uQwgpgf_WAsOLEJoDLLQJtgp14v5_Afx1OCm7DtFQTRMu3PO6Psbj8BsgYXFse4bir0hcprYYs6pflt6z0BQYozhrVnkccRyMgsPmOGQs6bptZVjqfRLvvBASCdAJuOo_kSiLqsFPoIUEPNR7m00]--></g></svg>