<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="977px" preserveAspectRatio="none" style="width:1520px;height:977px;background:#FFFFFF;" version="1.1" viewBox="0 0 1520 977" width="1520px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="157" x="683" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147" x="688" y="27.9951">Update Household</text><rect fill="#FFFFFF" height="819.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><rect fill="none" height="431.7266" style="stroke:#000000;stroke-width:1.5;" width="1248.5" x="265.5" y="235.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="349.5" x2="349.5" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="614.5" x2="614.5" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="729.5" x2="729.5" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="851.5" x2="851.5" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1078.5" x2="1078.5" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1387" x2="1387" y1="73.5938" y2="942.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1470" x2="1470" y1="73.5938" y2="942.0469"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="62.292">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="12" y="961.042">Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="275.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="282.5" y="62.292">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="275.5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="282.5" y="961.042">HouseholdRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="550.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="557.5" y="62.292">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="550.5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="557.5" y="961.042">RegistrationSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="688.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="695.5" y="62.292">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="688.5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="695.5" y="961.042">MDMSSvc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="781.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="788.5" y="62.292">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="781.5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="788.5" y="961.042">IndividualRegistry</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1051.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1058.5" y="62.292">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1051.5" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1058.5" y="961.042">Kafka</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1348" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1355" y="62.292">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1348" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1355" y="961.042">Persister</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1436" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1443" y="62.292">Indexer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="1436" y="941.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1443" y="961.042">Indexer</text><rect fill="#FFFFFF" height="819.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="344.5" y="104.7266"/><polygon fill="#181818" points="332.5,100.7266,342.5,104.7266,332.5,108.7266,336.5,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="338.5" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="40.5" y="99.6606">Update Household</text><polygon fill="#181818" points="718,129.8594,728,133.8594,718,137.8594,722,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="614.5" x2="724" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="621.5" y="128.7935">Fetch Config</text><polygon fill="#181818" points="625.5,158.9922,615.5,162.9922,625.5,166.9922,621.5,162.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="619.5" x2="729" y1="162.9922" y2="162.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="631.5" y="157.9263">mdms data</text><line style="stroke:#181818;stroke-width:1.0;" x1="614.5" x2="656.5" y1="207.2578" y2="207.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="656.5" x2="656.5" y1="207.2578" y2="220.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="615.5" x2="656.5" y1="220.2578" y2="220.2578"/><polygon fill="#181818" points="625.5,216.2578,615.5,220.2578,625.5,224.2578,621.5,220.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="621.5" y="187.0591">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="621.5" y="202.1919">Request</text><path d="M265.5,235.2578 L337.5,235.2578 L337.5,242.3906 L327.5,252.3906 L265.5,252.3906 L265.5,235.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="431.7266" style="stroke:#000000;stroke-width:1.5;" width="1248.5" x="265.5" y="235.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="280.5" y="248.3247">opt</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="273.5234" y2="273.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="273.5234" y2="286.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="286.5234" y2="286.5234"/><polygon fill="#181818" points="365.5,282.5234,355.5,286.5234,365.5,290.5234,361.5,286.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="361.5" y="268.4575">Individual data changed?</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="315.6563" y2="315.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="315.6563" y2="328.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="328.6563" y2="328.6563"/><polygon fill="#181818" points="365.5,324.6563,355.5,328.6563,365.5,332.6563,361.5,328.6563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="361.5" y="310.5903">Fetch individual(s) to update</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="354.5" y1="357.7891" y2="357.7891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="312.5" y1="357.7891" y2="370.7891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="353.5" y1="370.7891" y2="370.7891"/><polygon fill="#181818" points="345.5,366.7891,355.5,370.7891,345.5,374.7891,349.5,370.7891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="277.5" y="352.7231">Individual(s)</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="399.9219" y2="399.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="399.9219" y2="412.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="412.9219" y2="412.9219"/><polygon fill="#181818" points="365.5,408.9219,355.5,412.9219,365.5,416.9219,361.5,412.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="361.5" y="394.856">Update household individual</text><polygon fill="#181818" points="840,438.0547,850,442.0547,840,446.0547,844,442.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="846" y1="442.0547" y2="442.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="361.5" y="436.9888">Update individual</text><polygon fill="#181818" points="1067,467.1875,1077,471.1875,1067,475.1875,1071,471.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="852" x2="1073" y1="471.1875" y2="471.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="859" y="466.1216">(async) Produce Individual Data</text><polygon fill="#181818" points="1090,496.3203,1080,500.3203,1090,504.3203,1086,500.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1386" y1="500.3203" y2="500.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1096" y="495.2544">(async) Consume Individual Data</text><polygon fill="#181818" points="1090,525.4531,1080,529.4531,1090,533.4531,1086,529.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1469" y1="529.4531" y2="529.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1096" y="524.3872">(async) Consume Individual Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="558.5859" y2="558.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="558.5859" y2="571.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="571.5859" y2="571.5859"/><polygon fill="#181818" points="365.5,567.5859,355.5,571.5859,365.5,575.5859,361.5,571.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="361.5" y="553.52">Update Household Individual mapping</text><polygon fill="#181818" points="1067,596.7188,1077,600.7188,1067,604.7188,1071,600.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="1073" y1="600.7188" y2="600.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="361.5" y="595.6528">(async) Produce Household-Individual mapping data</text><polygon fill="#181818" points="1090,625.8516,1080,629.8516,1090,633.8516,1086,629.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1386" y1="629.8516" y2="629.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1096" y="624.7856">(async) Consume Household-Individual Data</text><polygon fill="#181818" points="1090,654.9844,1080,658.9844,1090,662.9844,1086,658.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1469" y1="658.9844" y2="658.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="1096" y="653.9185">(async) Consume Household-Individual Data</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="695.1172" y2="695.1172"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="695.1172" y2="708.1172"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="708.1172" y2="708.1172"/><polygon fill="#181818" points="365.5,704.1172,355.5,708.1172,365.5,712.1172,361.5,708.1172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="361.5" y="690.0513">Fetch household</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="354.5" y1="737.25" y2="737.25"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="312.5" y1="737.25" y2="750.25"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="312.5" x2="353.5" y1="750.25" y2="750.25"/><polygon fill="#181818" points="345.5,746.25,355.5,750.25,345.5,754.25,349.5,750.25" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="287.5" y="732.1841">Household</text><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="396.5" y1="779.3828" y2="779.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="396.5" x2="396.5" y1="779.3828" y2="792.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="355.5" x2="396.5" y1="792.3828" y2="792.3828"/><polygon fill="#181818" points="365.5,788.3828,355.5,792.3828,365.5,796.3828,361.5,792.3828" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="361.5" y="774.3169">Update household</text><polygon fill="#181818" points="1067,817.5156,1077,821.5156,1067,825.5156,1071,821.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="1073" y1="821.5156" y2="821.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="361.5" y="816.4497">(async) Produce Household Data</text><polygon fill="#181818" points="1090,846.6484,1080,850.6484,1090,854.6484,1086,850.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1386" y1="850.6484" y2="850.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1096" y="845.5825">(async) Consume Household Data</text><polygon fill="#181818" points="1090,875.7813,1080,879.7813,1090,883.7813,1086,879.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084" x2="1469" y1="879.7813" y2="879.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1096" y="874.7153">(async) Consume Household Data</text><polygon fill="#181818" points="44.5,920.0469,34.5,924.0469,44.5,928.0469,40.5,924.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="348.5" y1="924.0469" y2="924.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="50.5" y="903.8481">HTTP Status OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="50.5" y="918.981">Return Payload with householdRegistrationId</text><!--MD5=[28b0feca4c84c0e2b177f0f7d3b284cf]
@startuml
title Update Household

Client->HouseholdRegistry ++:Update Household
RegistrationSvc->MDMSSvc: Fetch Config
MDMSSvc- ->RegistrationSvc: mdms data
RegistrationSvc->RegistrationSvc: Validate\nRequest
opt
HouseholdRegistry->HouseholdRegistry: Individual data changed?
HouseholdRegistry->HouseholdRegistry: Fetch individual(s) to update
HouseholdRegistry<- -HouseholdRegistry: Individual(s)
HouseholdRegistry->HouseholdRegistry: Update household individual
HouseholdRegistry->IndividualRegistry: Update individual
IndividualRegistry->Kafka: (async) Produce Individual Data
Kafka<-Persister: (async) Consume Individual Data
Kafka<-Indexer: (async) Consume Individual Data
HouseholdRegistry->HouseholdRegistry: Update Household Individual mapping
HouseholdRegistry->Kafka: (async) Produce Household-Individual mapping data
Kafka<-Persister: (async) Consume Household-Individual Data
Kafka<-Indexer: (async) Consume Household-Individual Data
end
HouseholdRegistry->HouseholdRegistry: Fetch household
HouseholdRegistry<- -HouseholdRegistry: Household
HouseholdRegistry->HouseholdRegistry: Update household
HouseholdRegistry->Kafka: (async) Produce Household Data
Kafka<-Persister: (async) Consume Household Data
Kafka<-Indexer: (async) Consume Household Data
HouseholdRegistry->Client - -: HTTP Status OK\nReturn Payload with householdRegistrationId
@enduml

PlantUML version 1.2022.8beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>